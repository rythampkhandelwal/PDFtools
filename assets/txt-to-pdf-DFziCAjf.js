import{c as O,i as $,n as C,f as j,o as U,d as H,p as _,j as Z}from"./main-Dzxg2eZZ.js";import"./mobileMenu-CQFcDk7p.js";import"./full-width-CrKHpSp0.js";import"./simple-mode-footer-rW7ABm1-.js";import{P as q,S as R,g as G,r as M}from"./PDFButton-_8Cap8jz.js";import{l as J,f as K,g as Q,a as V}from"./font-loader-BuYTm9VT.js";import"./index-DMQTJy3b.js";let y=[],I="upload",E=["eng"];const A=Object.keys(J).sort().map(n=>{let t=n;try{t=new Intl.DisplayNames(["en"],{type:"language"}).of(n)||n}catch(d){console.warn(`Failed to get language name for ${n}`,d)}return{code:n,name:`${t} (${n})`}}),T=()=>{const n=document.getElementById("file-display-area"),t=document.getElementById("file-controls"),d=document.getElementById("drop-zone");!n||!t||!d||(n.innerHTML="",y.length>0&&I==="upload"?(d.classList.add("hidden"),t.classList.remove("hidden"),y.forEach((p,x)=>{const u=document.createElement("div");u.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const s=document.createElement("span");s.className="truncate font-medium text-gray-200",s.textContent=p.name;const o=document.createElement("span");o.className="text-gray-400 text-xs ml-2",o.textContent=`(${j(p.size)})`;const c=document.createElement("button");c.className="ml-4 text-red-400 hover:text-red-300",c.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',c.onclick=()=>{y=y.filter((v,r)=>r!==x),T()},u.append(s,o,c),n.appendChild(u)}),O({icons:$})):(d.classList.remove("hidden"),t.classList.add("hidden")))},X=()=>{y=[];const n=document.getElementById("file-input"),t=document.getElementById("text-input");n&&(n.value=""),t&&(t.value=""),T()};async function W(n,t,d,p,x,u,s){const o=await q.create();o.registerFontkit(K);const c=new Map,v=await o.embedFont(R.Helvetica);E.includes("eng")||E.push("eng");for(const a of E)try{const f=await Q(a),m=await o.embedFont(f,{subset:!1});c.set(a,m)}catch(f){console.warn(`Failed to load font for ${a}, using fallback`,f),c.set(a,v)}let r=d==="Custom"?[u||595,s||842]:G[d];x==="landscape"&&(r=[r[1],r[0]]);const l=72,h=Z(p);let i=o.addPage(r),{width:b,height:k}=i.getSize();const D=b-l*2,w=t*1.3;let e=k-l;const g=n.split(`
`);for(const a of g){if(a.trim()===""){e-=w,e<l&&(i=o.addPage(r),e=i.getHeight()-l);continue}const f=a.split(" ");let m=[],F=0;for(const B of f){let L="eng";for(const S of B){const P=V(S);if(E.includes(P)){L=P;break}}const z=c.get(L)||c.get("eng")||v,N=z.widthOfTextAtSize(B+" ",t);F+N>D&&m.length>0&&(m.forEach((S,P)=>{l+F*P/m.length,i.drawText(S.text,{x:l+(F-D)/2,y:e,size:t,font:S.font,color:M(h.r/255,h.g/255,h.b/255)})}),m=[],F=0,e-=w,e<l&&(i=o.addPage(r),e=i.getHeight()-l)),m.push({text:B+" ",font:z}),F+=N}if(m.length>0){let B=l;m.forEach(L=>{i.drawText(L.text,{x:B,y:e,size:t,font:L.font,color:M(h.r/255,h.g/255,h.b/255)}),B+=L.font.widthOfTextAtSize(L.text,t)}),e-=w,e<l&&(i=o.addPage(r),e=i.getHeight()-l)}}return await o.save()}async function Y(){const n=parseInt(document.getElementById("font-size").value)||12,t=document.getElementById("page-size").value,d=document.getElementById("text-color").value,p=document.getElementById("page-orientation").value,x=parseInt(document.getElementById("custom-width")?.value),u=parseInt(document.getElementById("custom-height")?.value);if(I==="upload"&&y.length===0){C("No Files","Please select at least one text file.");return}if(I==="text"&&!document.getElementById("text-input").value.trim()){C("No Text","Please enter some text to convert.");return}U("Creating PDF...");try{if(I==="upload"){let s="";for(const c of y){const v=await c.text();s+=v+`

`}const o=await W(s,n,t,d,p,x,u);H(new Blob([new Uint8Array(o)],{type:"application/pdf"}),"from_text.pdf")}else{const s=document.getElementById("text-input"),o=await W(s.value,n,t,d,p,x,u);H(new Blob([new Uint8Array(o)],{type:"application/pdf"}),"from_text.pdf")}C("Success","Text converted to PDF successfully!","success",()=>{X()})}catch(s){console.error(s),C("Error","Failed to convert text to PDF.")}finally{_()}}document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("file-input"),t=document.getElementById("drop-zone"),d=document.getElementById("add-more-btn"),p=document.getElementById("clear-files-btn"),x=document.getElementById("process-btn"),u=document.getElementById("back-to-tools"),s=document.getElementById("txt-mode-upload-btn"),o=document.getElementById("txt-mode-text-btn"),c=document.getElementById("txt-upload-panel"),v=document.getElementById("txt-text-panel"),r=document.getElementById("page-size"),l=document.getElementById("custom-size-container"),h=document.getElementById("lang-dropdown-btn"),i=document.getElementById("lang-dropdown-content"),b=document.getElementById("lang-search"),k=document.getElementById("language-list-container");u&&u.addEventListener("click",()=>{window.location.href="/"}),s&&o&&c&&v&&(s.addEventListener("click",()=>{I="upload",s.classList.remove("bg-gray-700","text-gray-300"),s.classList.add("bg-indigo-600","text-white"),o.classList.remove("bg-indigo-600","text-white"),o.classList.add("bg-gray-700","text-gray-300"),c.classList.remove("hidden"),v.classList.add("hidden")}),o.addEventListener("click",()=>{I="text",o.classList.remove("bg-gray-700","text-gray-300"),o.classList.add("bg-indigo-600","text-white"),s.classList.remove("bg-indigo-600","text-white"),s.classList.add("bg-gray-700","text-gray-300"),v.classList.remove("hidden"),c.classList.add("hidden")})),r&&l&&r.addEventListener("change",()=>{r.value==="Custom"?l.classList.remove("hidden"):l.classList.add("hidden")}),h&&i&&k&&(A.forEach(e=>{const g=document.createElement("label");g.className="flex items-center gap-2 p-2 hover:bg-gray-700 rounded cursor-pointer";const a=document.createElement("input");a.type="checkbox",a.value=e.code,a.className="w-4 h-4",a.checked=e.code==="eng",a.addEventListener("change",()=>{a.checked?E.includes(e.code)||E.push(e.code):E=E.filter(m=>m!==e.code),D()});const f=document.createElement("span");f.textContent=e.name,f.className="text-sm text-gray-300",g.append(a,f),k.appendChild(g)}),h.addEventListener("click",()=>{i.classList.toggle("hidden")}),document.addEventListener("click",e=>{!h.contains(e.target)&&!i.contains(e.target)&&i.classList.add("hidden")}),b&&b.addEventListener("input",()=>{const e=b.value.toLowerCase();k.querySelectorAll("label").forEach(a=>{(a.textContent?.toLowerCase()||"").includes(e)?a.style.display="flex":a.style.display="none"})}));function D(){const e=document.getElementById("lang-dropdown-text");if(e){const g=E.map(a=>A.find(m=>m.code===a)?.name||a);e.textContent=g.length>0?g.join(", "):"Select Languages"}}const w=e=>{if(!e||e.length===0)return;const g=Array.from(e).filter(a=>a.name.toLowerCase().endsWith(".txt")||a.type==="text/plain");g.length<e.length&&C("Invalid Files","Some files were skipped. Only text files are allowed."),g.length>0&&(y=[...y,...g],T())};n&&t&&(n.addEventListener("change",e=>{w(e.target.files)}),t.addEventListener("dragover",e=>{e.preventDefault(),t.classList.add("bg-gray-700")}),t.addEventListener("dragleave",e=>{e.preventDefault(),t.classList.remove("bg-gray-700")}),t.addEventListener("drop",e=>{e.preventDefault(),t.classList.remove("bg-gray-700"),w(e.dataTransfer?.files??null)}),n.addEventListener("click",()=>{n.value=""})),d&&n&&d.addEventListener("click",()=>{n.click()}),p&&p.addEventListener("click",()=>{y=[],T()}),x&&x.addEventListener("click",Y),O({icons:$})});
