import{v as rt,u as nt,G as ot,c as ee,i as te,d as Te,n as X,g as at,f as it}from"./main-Dzxg2eZZ.js";import"./mobileMenu-CQFcDk7p.js";import"./full-width-CrKHpSp0.js";import"./simple-mode-footer-rW7ABm1-.js";import{c as st}from"./_commonjs-dynamic-modules-TDtrdbi3.js";import{P as ct,S as lt,r as ut}from"./PDFButton-_8Cap8jz.js";import{f as dt,g as ne}from"./font-loader-BuYTm9VT.js";import"./index-DMQTJy3b.js";const Ze={eng:"English",afr:"Afrikaans",amh:"Amharic",ara:"Arabic",asm:"Assamese",aze:"Azerbaijani",aze_cyrl:"Azerbaijani - Cyrillic",bel:"Belarusian",ben:"Bengali",bod:"Tibetan",bos:"Bosnian",bul:"Bulgarian",cat:"Catalan; Valencian",ceb:"Cebuano",ces:"Czech",chi_sim:"Chinese - Simplified",chi_tra:"Chinese - Traditional",chr:"Cherokee",cym:"Welsh",dan:"Danish",deu:"German",dzo:"Dzongkha",ell:"Greek, Modern (1453-)",enm:"English, Middle (1100-1500)",epo:"Esperanto",est:"Estonian",eus:"Basque",fas:"Persian",fin:"Finnish",fra:"French",frk:"German Fraktur",frm:"French, Middle (ca. 1400-1600)",gle:"Irish",glg:"Galician",grc:"Greek, Ancient (-1453)",guj:"Gujarati",hat:"Haitian; Haitian Creole",heb:"Hebrew",hin:"Hindi",hrv:"Croatian",hun:"Hungarian",iku:"Inuktitut",ind:"Indonesian",isl:"Icelandic",ita:"Italian",ita_old:"Italian - Old",jav:"Javanese",jpn:"Japanese",kan:"Kannada",kat:"Georgian",kat_old:"Georgian - Old",kaz:"Kazakh",khm:"Central Khmer",kir:"Kirghiz; Kyrgyz",kor:"Korean",kur:"Kurdish",lao:"Lao",lat:"Latin",lav:"Latvian",lit:"Lithuanian",mal:"Malayalam",mar:"Marathi",mkd:"Macedonian",mlt:"Maltese",msa:"Malay",mya:"Burmese",nep:"Nepali",nld:"Dutch; Flemish",nor:"Norwegian",ori:"Oriya",pan:"Panjabi; Punjabi",pol:"Polish",por:"Portuguese",pus:"Pushto; Pashto",ron:"Romanian; Moldavian; Moldovan",rus:"Russian",san:"Sanskrit",sin:"Sinhala; Sinhalese",slk:"Slovak",slv:"Slovenian",spa:"Spanish; Castilian",spa_old:"Spanish; Castilian - Old",sqi:"Albanian",srp:"Serbian",srp_latn:"Serbian - Latin",swa:"Swahili",swe:"Swedish",syr:"Syriac",tam:"Tamil",tel:"Telugu",tgk:"Tajik",tgl:"Tagalog",tha:"Thai",tir:"Tigrinya",tur:"Turkish",uig:"Uighur; Uyghur",ukr:"Ukrainian",urd:"Urdu",uzb:"Uzbek",uzb_cyrl:"Uzbek - Cyrillic",vie:"Vietnamese",yid:"Yiddish"};var oe={exports:{}},Ae;function ft(){return Ae||(Ae=1,(function(a){var n=(function(r){var s=Object.prototype,i=s.hasOwnProperty,c=Object.defineProperty||function(t,e,o){t[e]=o.value},d,y=typeof Symbol=="function"?Symbol:{},w=y.iterator||"@@iterator",E=y.asyncIterator||"@@asyncIterator",k=y.toStringTag||"@@toStringTag";function I(t,e,o){return Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{I({},"")}catch{I=function(e,o,f){return e[o]=f}}function g(t,e,o,f){var l=e&&e.prototype instanceof L?e:L,p=Object.create(l.prototype),P=new Y(f||[]);return c(p,"_invoke",{value:Z(t,o,P)}),p}r.wrap=g;function b(t,e,o){try{return{type:"normal",arg:t.call(e,o)}}catch(f){return{type:"throw",arg:f}}}var G="suspendedStart",v="suspendedYield",B="executing",U="completed",R={};function L(){}function A(){}function M(){}var $={};I($,w,function(){return this});var H=Object.getPrototypeOf,m=H&&H(H(J([])));m&&m!==s&&i.call(m,w)&&($=m);var N=M.prototype=L.prototype=Object.create($);A.prototype=M,c(N,"constructor",{value:M,configurable:!0}),c(M,"constructor",{value:A,configurable:!0}),A.displayName=I(M,k,"GeneratorFunction");function x(t){["next","throw","return"].forEach(function(e){I(t,e,function(o){return this._invoke(e,o)})})}r.isGeneratorFunction=function(t){var e=typeof t=="function"&&t.constructor;return e?e===A||(e.displayName||e.name)==="GeneratorFunction":!1},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,M):(t.__proto__=M,I(t,k,"GeneratorFunction")),t.prototype=Object.create(N),t},r.awrap=function(t){return{__await:t}};function q(t,e){function o(p,P,O,C){var T=b(t[p],t,P);if(T.type==="throw")C(T.arg);else{var u=T.arg,h=u.value;return h&&typeof h=="object"&&i.call(h,"__await")?e.resolve(h.__await).then(function(S){o("next",S,O,C)},function(S){o("throw",S,O,C)}):e.resolve(h).then(function(S){u.value=S,O(u)},function(S){return o("throw",S,O,C)})}}var f;function l(p,P){function O(){return new e(function(C,T){o(p,P,C,T)})}return f=f?f.then(O,O):O()}c(this,"_invoke",{value:l})}x(q.prototype),I(q.prototype,E,function(){return this}),r.AsyncIterator=q,r.async=function(t,e,o,f,l){l===void 0&&(l=Promise);var p=new q(g(t,e,o,f),l);return r.isGeneratorFunction(e)?p:p.next().then(function(P){return P.done?P.value:p.next()})};function Z(t,e,o){var f=G;return function(p,P){if(f===B)throw new Error("Generator is already running");if(f===U){if(p==="throw")throw P;return V()}for(o.method=p,o.arg=P;;){var O=o.delegate;if(O){var C=j(O,o);if(C){if(C===R)continue;return C}}if(o.method==="next")o.sent=o._sent=o.arg;else if(o.method==="throw"){if(f===G)throw f=U,o.arg;o.dispatchException(o.arg)}else o.method==="return"&&o.abrupt("return",o.arg);f=B;var T=b(t,e,o);if(T.type==="normal"){if(f=o.done?U:v,T.arg===R)continue;return{value:T.arg,done:o.done}}else T.type==="throw"&&(f=U,o.method="throw",o.arg=T.arg)}}}function j(t,e){var o=e.method,f=t.iterator[o];if(f===d)return e.delegate=null,o==="throw"&&t.iterator.return&&(e.method="return",e.arg=d,j(t,e),e.method==="throw")||o!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+o+"' method")),R;var l=b(f,t.iterator,e.arg);if(l.type==="throw")return e.method="throw",e.arg=l.arg,e.delegate=null,R;var p=l.arg;if(!p)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,R;if(p.done)e[t.resultName]=p.value,e.next=t.nextLoc,e.method!=="return"&&(e.method="next",e.arg=d);else return p;return e.delegate=null,R}x(N),I(N,k,"Generator"),I(N,w,function(){return this}),I(N,"toString",function(){return"[object Generator]"});function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function K(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Y(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}r.keys=function(t){var e=Object(t),o=[];for(var f in e)o.push(f);return o.reverse(),function l(){for(;o.length;){var p=o.pop();if(p in e)return l.value=p,l.done=!1,l}return l.done=!0,l}};function J(t){if(t){var e=t[w];if(e)return e.call(t);if(typeof t.next=="function")return t;if(!isNaN(t.length)){var o=-1,f=function l(){for(;++o<t.length;)if(i.call(t,o))return l.value=t[o],l.done=!1,l;return l.value=d,l.done=!0,l};return f.next=f}}return{next:V}}r.values=J;function V(){return{value:d,done:!0}}return Y.prototype={constructor:Y,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=d,this.done=!1,this.delegate=null,this.method="next",this.arg=d,this.tryEntries.forEach(K),!t)for(var e in this)e.charAt(0)==="t"&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=d)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(C,T){return p.type="throw",p.arg=t,e.next=C,T&&(e.method="next",e.arg=d),!!T}for(var f=this.tryEntries.length-1;f>=0;--f){var l=this.tryEntries[f],p=l.completion;if(l.tryLoc==="root")return o("end");if(l.tryLoc<=this.prev){var P=i.call(l,"catchLoc"),O=i.call(l,"finallyLoc");if(P&&O){if(this.prev<l.catchLoc)return o(l.catchLoc,!0);if(this.prev<l.finallyLoc)return o(l.finallyLoc)}else if(P){if(this.prev<l.catchLoc)return o(l.catchLoc,!0)}else if(O){if(this.prev<l.finallyLoc)return o(l.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;o>=0;--o){var f=this.tryEntries[o];if(f.tryLoc<=this.prev&&i.call(f,"finallyLoc")&&this.prev<f.finallyLoc){var l=f;break}}l&&(t==="break"||t==="continue")&&l.tryLoc<=e&&e<=l.finallyLoc&&(l=null);var p=l?l.completion:{};return p.type=t,p.arg=e,l?(this.method="next",this.next=l.finallyLoc,R):this.complete(p)},complete:function(t,e){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&e&&(this.next=e),R},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.finallyLoc===t)return this.complete(o.completion,o.afterLoc),K(o),R}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc===t){var f=o.completion;if(f.type==="throw"){var l=f.arg;K(o)}return l}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,o){return this.delegate={iterator:J(t),resultName:e,nextLoc:o},this.method==="next"&&(this.arg=d),R}},r})(a.exports);try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}})(oe)),oe.exports}var ae,Be;function Ie(){return Be||(Be=1,ae=(a,n)=>`${a}-${n}-${Math.random().toString(16).slice(3,8)}`),ae}var ie,Re;function Qe(){if(Re)return ie;Re=1;const a=Ie();let n=0;return ie=({id:r,action:s,payload:i={}})=>{let c=r;return typeof c>"u"&&(c=a("Job",n),n+=1),{id:c,action:s,payload:i}},ie}var Q={},Pe;function Oe(){if(Pe)return Q;Pe=1;let a=!1;return Q.logging=a,Q.setLogging=n=>{a=n},Q.log=(...n)=>a?console.log.apply(this,n):null,Q}var se,Ce;function ht(){if(Ce)return se;Ce=1;const a=Qe(),{log:n}=Oe(),r=Ie();let s=0;return se=()=>{const i=r("Scheduler",s),c={},d={};let y=[];s+=1;const w=()=>y.length,E=()=>Object.keys(c).length,k=()=>{if(y.length!==0){const v=Object.keys(c);for(let B=0;B<v.length;B+=1)if(typeof d[v[B]]>"u"){y[0](c[v[B]]);break}}},I=(v,B)=>new Promise((U,R)=>{const L=a({action:v,payload:B});y.push(async A=>{y.shift(),d[A.id]=L;try{U(await A[v].apply(this,[...B,L.id]))}catch(M){R(M)}finally{delete d[A.id],k()}}),n(`[${i}]: Add ${L.id} to JobQueue`),n(`[${i}]: JobQueue length=${y.length}`),k()});return{addWorker:v=>(c[v.id]=v,n(`[${i}]: Add ${v.id}`),n(`[${i}]: Number of workers=${E()}`),k(),v.id),addJob:async(v,...B)=>{if(E()===0)throw Error(`[${i}]: You need to have at least one worker before adding jobs`);return I(v,B)},terminate:async()=>{Object.keys(c).forEach(async v=>{await c[v].terminate()}),y=[]},getQueueLen:w,getNumWorkers:E}},se}var ce,_e;function gt(){return _e||(_e=1,ce=a=>{const n={};return typeof WorkerGlobalScope<"u"?n.type="webworker":typeof document=="object"?n.type="browser":typeof rt=="object"&&typeof st=="function"&&(n.type="node"),typeof a>"u"?n:n[a]}),ce}var le,Me;function pt(){if(Me)return le;Me=1;const n=gt()("type")==="browser"?r=>new URL(r,window.location.href).href:r=>r;return le=r=>{const s={...r};return["corePath","workerPath","langPath"].forEach(i=>{r[i]&&(s[i]=n(s[i]))}),s},le}var ue,Ne;function Xe(){return Ne||(Ne=1,ue={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),ue}const mt="6.0.1",yt={version:mt};var de,xe;function vt(){return xe||(xe=1,de={workerBlobURL:!0,logger:()=>{}}),de}var fe,qe;function wt(){if(qe)return fe;qe=1;const a=yt.version;return fe={...vt(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${a}/dist/worker.min.js`},fe}var he,Fe;function bt(){return Fe||(Fe=1,he=({workerPath:a,workerBlobURL:n})=>{let r;if(Blob&&URL&&n){const s=new Blob([`importScripts("${a}");`],{type:"application/javascript"});r=new Worker(URL.createObjectURL(s))}else r=new Worker(a);return r}),he}var ge,De;function Lt(){return De||(De=1,ge=a=>{a.terminate()}),ge}var pe,Ge;function Et(){return Ge||(Ge=1,pe=(a,n)=>{a.onmessage=({data:r})=>{n(r)}}),pe}var me,je;function kt(){return je||(je=1,me=async(a,n)=>{a.postMessage(n)}),me}var ye,ze;function St(){if(ze)return ye;ze=1;const a=r=>new Promise((s,i)=>{const c=new FileReader;c.onload=()=>{s(c.result)},c.onerror=({target:{error:{code:d}}})=>{i(Error(`File could not be read! Code=${d}`))},c.readAsArrayBuffer(r)}),n=async r=>{let s=r;if(typeof r>"u")return"undefined";if(typeof r=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(r)?s=atob(r.split(",")[1]).split("").map(i=>i.charCodeAt(0)):s=await(await fetch(r)).arrayBuffer();else if(typeof HTMLElement<"u"&&r instanceof HTMLElement)r.tagName==="IMG"&&(s=await n(r.src)),r.tagName==="VIDEO"&&(s=await n(r.poster)),r.tagName==="CANVAS"&&await new Promise(i=>{r.toBlob(async c=>{s=await a(c),i()})});else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas){const i=await r.convertToBlob();s=await a(i)}else(r instanceof File||r instanceof Blob)&&(s=await a(r));return new Uint8Array(s)};return ye=n,ye}var ve,Ue;function It(){if(Ue)return ve;Ue=1;const a=wt(),n=bt(),r=Lt(),s=Et(),i=kt(),c=St();return ve={defaultOptions:a,spawnWorker:n,terminateWorker:r,onMessage:s,send:i,loadImage:c},ve}var we,$e;function et(){if($e)return we;$e=1;const a=pt(),n=Qe(),{log:r}=Oe(),s=Ie(),i=Xe(),{defaultOptions:c,spawnWorker:d,terminateWorker:y,onMessage:w,loadImage:E,send:k}=It();let I=0;return we=async(g="eng",b=i.LSTM_ONLY,G={},v={})=>{const B=s("Worker",I),{logger:U,errorHandler:R,...L}=a({...c,...G}),A={},M=typeof g=="string"?g.split("+"):g;let $=b,H=v;const m=[i.DEFAULT,i.LSTM_ONLY].includes(b)&&!L.legacyCore;let N,x;const q=new Promise((u,h)=>{x=u,N=h}),Z=u=>{N(u.message)};let j=d(L);j.onerror=Z,I+=1;const _=({id:u,action:h,payload:S})=>new Promise((F,D)=>{r(`[${B}]: Start ${u}, action=${h}`);const W=`${h}-${u}`;A[W]={resolve:F,reject:D},k(j,{workerId:B,jobId:u,action:h,payload:S})}),K=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),Y=u=>_(n({id:u,action:"load",payload:{options:{lstmOnly:m,corePath:L.corePath,logging:L.logging}}})),J=(u,h,S)=>_(n({id:S,action:"FS",payload:{method:"writeFile",args:[u,h]}})),V=(u,h)=>_(n({id:h,action:"FS",payload:{method:"readFile",args:[u,{encoding:"utf8"}]}})),t=(u,h)=>_(n({id:h,action:"FS",payload:{method:"unlink",args:[u]}})),e=(u,h,S)=>_(n({id:S,action:"FS",payload:{method:u,args:h}})),o=(u,h)=>_(n({id:h,action:"loadLanguage",payload:{langs:u,options:{langPath:L.langPath,dataPath:L.dataPath,cachePath:L.cachePath,cacheMethod:L.cacheMethod,gzip:L.gzip,lstmOnly:[i.DEFAULT,i.LSTM_ONLY].includes($)&&!L.legacyLang}}})),f=(u,h,S,F)=>_(n({id:F,action:"initialize",payload:{langs:u,oem:h,config:S}})),l=(u="eng",h,S,F)=>{if(m&&[i.TESSERACT_ONLY,i.TESSERACT_LSTM_COMBINED].includes(h))throw Error("Legacy model requested but code missing.");const D=h||$;$=D;const W=S||H;H=W;const re=(typeof u=="string"?u.split("+"):u).filter(tt=>!M.includes(tt));return M.push(...re),re.length>0?o(re,F).then(()=>f(u,D,W,F)):f(u,D,W,F)},p=(u={},h)=>_(n({id:h,action:"setParameters",payload:{params:u}})),P=async(u,h={},S={text:!0},F)=>_(n({id:F,action:"recognize",payload:{image:await E(u),options:h,output:S}})),O=async(u,h)=>{if(m)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return _(n({id:h,action:"detect",payload:{image:await E(u)}}))},C=async()=>(j!==null&&(y(j),j=null),Promise.resolve());w(j,({workerId:u,jobId:h,status:S,action:F,data:D})=>{const W=`${F}-${h}`;if(S==="resolve")r(`[${u}]: Complete ${h}`),A[W].resolve({jobId:h,data:D}),delete A[W];else if(S==="reject")if(A[W].reject(D),delete A[W],F==="load"&&N(D),R)R(D);else throw Error(D);else S==="progress"&&U({...D,userJobId:h})});const T={id:B,worker:j,load:K,writeText:J,readText:V,removeFile:t,FS:e,reinitialize:l,setParameters:p,recognize:P,detect:O,terminate:C};return Y().then(()=>o(g)).then(()=>f(g,b,v)).then(()=>x(T)).catch(()=>{}),q},we}var be,We;function Ot(){if(We)return be;We=1;const a=et();return be={recognize:async(s,i,c)=>{const d=await a(i,1,c);return d.recognize(s).finally(async()=>{await d.terminate()})},detect:async(s,i)=>{const c=await a("osd",0,i);return c.detect(s).finally(async()=>{await c.terminate()})}},be}var Le,He;function Tt(){return He||(He=1,Le={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),Le}var Ee,Ke;function At(){return Ke||(Ke=1,Ee={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),Ee}var ke,Ye;function Bt(){if(Ye)return ke;Ye=1,ft();const a=ht(),n=et(),r=Ot(),s=Tt(),i=Xe(),c=At(),{setLogging:d}=Oe();return ke={languages:s,OEM:i,PSM:c,createScheduler:a,createWorker:n,setLogging:d,...r},ke}var Rt=Bt();const Je=nt(Rt);ot.workerSrc=new URL("/assets/pdf.worker.min-qwK7q_zL.mjs",import.meta.url).toString();const z={file:null,searchablePdfBytes:null},Pt={alphanumeric:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 .,!?-'"`,"numbers-currency":"0123456789$€£¥.,- ","letters-only":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz ","numbers-only":"0123456789",invoice:"0123456789$.,/-#: ",forms:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 .,()-_/@#:"};function Ct(a){const r=new DOMParser().parseFromString(a,"text/html"),s=[];return r.querySelectorAll(".ocrx_word").forEach(function(c){const d=c.getAttribute("title"),y=c.textContent?.trim()||"";if(!d||!y)return;const w=d.match(/bbox (\d+) (\d+) (\d+) (\d+)/),E=d.match(/x_wconf (\d+)/);w&&s.push({text:y,bbox:{x0:parseInt(w[1]),y0:parseInt(w[2]),x1:parseInt(w[3]),y1:parseInt(w[4])},confidence:E?parseInt(E[1]):0})}),s}function _t(a){const n=a.getImageData(0,0,a.canvas.width,a.canvas.height),r=n.data;for(let s=0;s<r.length;s+=4){const c=.299*r[s]+.587*r[s+1]+.114*r[s+2]>128?255:0;r[s]=r[s+1]=r[s+2]=c}a.putImageData(n,0,0)}function Se(a,n){const r=document.getElementById("progress-bar"),s=document.getElementById("progress-status"),i=document.getElementById("progress-log");if(!r||!s||!i)return;s.textContent=a,r.style.width=`${Math.min(100,n*100)}%`;const c=`Status: ${a}`;i.textContent+=c+`
`,i.scrollTop=i.scrollHeight}function Mt(){z.file=null,z.searchablePdfBytes=null;const a=document.getElementById("file-display-area");a&&(a.innerHTML="");const n=document.getElementById("tool-options");n&&n.classList.add("hidden");const r=document.getElementById("ocr-progress");r&&r.classList.add("hidden");const s=document.getElementById("ocr-results");s&&s.classList.add("hidden");const i=document.getElementById("progress-log");i&&(i.textContent="");const c=document.getElementById("progress-bar");c&&(c.style.width="0%");const d=document.getElementById("file-input");d&&(d.value=""),document.querySelectorAll(".lang-checkbox").forEach(function(k){k.checked=!1});const w=document.getElementById("selected-langs-display");w&&(w.textContent="None");const E=document.getElementById("process-btn");E&&(E.disabled=!0)}async function Nt(){const a=Array.from(document.querySelectorAll(".lang-checkbox:checked")).map(function(y){return y.value}),n=parseFloat(document.getElementById("ocr-resolution").value),r=document.getElementById("ocr-binarize").checked,s=document.getElementById("ocr-whitelist").value;if(a.length===0){X("No Languages Selected","Please select at least one language for OCR.");return}if(!z.file){X("No File","Please upload a PDF file first.");return}const i=a.join("+"),c=document.getElementById("tool-options"),d=document.getElementById("ocr-progress");c&&c.classList.add("hidden"),d&&d.classList.remove("hidden");try{const y=await Je.createWorker(i,1,{logger:function(m){Se(m.status,m.progress||0)}});await y.setParameters({tessjs_create_hocr:"1",tessedit_pageseg_mode:Je.PSM.AUTO}),s&&await y.setParameters({tessedit_char_whitelist:s});const w=await z.file.arrayBuffer(),E=await at({data:w}).promise,k=await ct.create();k.registerFontkit(dt),Se("Loading fonts...",0);const I=["jpn","chi_sim","chi_tra","kor"],g=["hin","ben","guj","kan","mal","ori","pan","tam","tel","sin"],b=[...I,...g,"ara","rus","ukr"],G=a.find(function(m){return b.includes(m)})||a[0]||"eng",v=a.some(function(m){return I.includes(m)}),B=a.some(function(m){return g.includes(m)}),U=a.some(function(m){return!b.includes(m)})||a.includes("eng"),R=B&&U&&!v;let L,A;try{if(R){const[m,N]=await Promise.all([ne(G),ne("eng")]);L=await k.embedFont(m,{subset:!1}),A=await k.embedFont(N,{subset:!1})}else{const m=await ne(G);L=await k.embedFont(m,{subset:!1}),A=L}}catch(m){console.error("Font loading failed, falling back to Helvetica",m),L=await k.embedFont(lt.Helvetica),A=L,X("Font Warning","Could not load the specific font for this language. Some characters may not appear correctly.")}let M="";for(let m=1;m<=E.numPages;m++){Se(`Processing page ${m} of ${E.numPages}`,(m-1)/E.numPages);const N=await E.getPage(m),x=N.getViewport({scale:n}),q=document.createElement("canvas");q.width=x.width,q.height=x.height;const Z=q.getContext("2d");await N.render({canvasContext:Z,viewport:x,canvas:q}).promise,r&&_t(Z);const _=(await y.recognize(q,{},{text:!0,hocr:!0})).data,K=k.addPage([x.width,x.height]),Y=await new Promise(function(V){q.toBlob(function(t){const e=new FileReader;e.onload=function(){V(new Uint8Array(e.result))},e.readAsArrayBuffer(t)},"image/png")}),J=await k.embedPng(Y);K.drawImage(J,{x:0,y:0,width:x.width,height:x.height}),_.hocr&&Ct(_.hocr).forEach(function(t){const{x0:e,y0:o,x1:f,y1:l}=t.bbox,p=t.text.replace(/[\u0000-\u001F\u007F-\u009F\u200E\u200F\u202A-\u202E\uFEFF]/g,"");if(!p.trim())return;const O=/[^\u0000-\u007F]/.test(p)?L:A;if(!O){console.warn(`Font not available for text: "${p}"`);return}const C=f-e,T=l-o;if(C<=0||T<=0)return;let u=T*.9;try{let h=O.widthOfTextAtSize(p,u);for(;h>C&&u>1;)u-=.5,h=O.widthOfTextAtSize(p,u)}catch(h){console.warn(`Could not calculate text width for "${p}":`,h);return}try{K.drawText(p,{x:e,y:x.height-l+(T-u)/2,font:O,size:u,color:ut(0,0,0),opacity:0})}catch(h){console.warn(`Could not draw text "${p}":`,h)}}),M+=_.text+`

`}await y.terminate(),z.searchablePdfBytes=await k.save();const $=document.getElementById("ocr-results");d&&d.classList.add("hidden"),$&&$.classList.remove("hidden"),ee({icons:te});const H=document.getElementById("ocr-text-output");H&&(H.value=M.trim())}catch(y){console.error(y),X("OCR Error","An error occurred during the OCR process. The worker may have failed to load. Please try again."),c&&c.classList.remove("hidden"),d&&d.classList.add("hidden")}}async function xt(){const a=document.getElementById("file-display-area"),n=document.getElementById("tool-options");if(a)if(a.innerHTML="",z.file){const r=document.createElement("div");r.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const s=document.createElement("div");s.className="flex flex-col overflow-hidden";const i=document.createElement("div");i.className="truncate font-medium text-gray-200 text-sm mb-1",i.textContent=z.file.name;const c=document.createElement("div");c.className="text-xs text-gray-400",c.textContent=it(z.file.size),s.append(i,c);const d=document.createElement("button");d.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",d.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',d.onclick=function(){Mt()},r.append(s,d),a.appendChild(r),ee({icons:te}),n&&n.classList.remove("hidden")}else n&&n.classList.add("hidden")}function Ve(a){if(a&&a.length>0){const n=a[0];(n.type==="application/pdf"||n.name.toLowerCase().endsWith(".pdf"))&&(z.file=n,xt())}}function qt(){const a=document.getElementById("lang-list");a&&(a.innerHTML="",Object.entries(Ze).forEach(function([n,r]){const s=document.createElement("label");s.className="flex items-center gap-2 p-2 rounded-md hover:bg-gray-700 cursor-pointer";const i=document.createElement("input");i.type="checkbox",i.value=n,i.className="lang-checkbox w-4 h-4 rounded text-indigo-600 bg-gray-700 border-gray-600 focus:ring-indigo-500",s.append(i),s.append(document.createTextNode(" "+r)),a.appendChild(s)}))}document.addEventListener("DOMContentLoaded",function(){const a=document.getElementById("file-input"),n=document.getElementById("drop-zone"),r=document.getElementById("process-btn"),s=document.getElementById("back-to-tools"),i=document.getElementById("lang-search"),c=document.getElementById("lang-list"),d=document.getElementById("selected-langs-display"),y=document.getElementById("whitelist-preset"),w=document.getElementById("ocr-whitelist"),E=document.getElementById("copy-text-btn"),k=document.getElementById("download-txt-btn"),I=document.getElementById("download-searchable-pdf");qt(),s&&s.addEventListener("click",function(){window.location.href="/"}),a&&n&&(a.addEventListener("change",function(g){Ve(g.target.files)}),n.addEventListener("dragover",function(g){g.preventDefault(),n.classList.add("bg-gray-700")}),n.addEventListener("dragleave",function(g){g.preventDefault(),n.classList.remove("bg-gray-700")}),n.addEventListener("drop",function(g){g.preventDefault(),n.classList.remove("bg-gray-700");const b=g.dataTransfer?.files;if(b&&b.length>0){const G=Array.from(b).filter(function(v){return v.type==="application/pdf"||v.name.toLowerCase().endsWith(".pdf")});if(G.length>0){const v=new DataTransfer;v.items.add(G[0]),Ve(v.files)}}}),a.addEventListener("click",function(){a.value=""})),i&&c&&(i.addEventListener("input",function(){const g=i.value.toLowerCase();c.querySelectorAll("label").forEach(function(b){b.style.display=b.textContent?.toLowerCase().includes(g)?"":"none"})}),c.addEventListener("change",function(){const g=Array.from(c.querySelectorAll(".lang-checkbox:checked")).map(function(b){return Ze[b.value]});d&&(d.textContent=g.length>0?g.join(", "):"None"),r&&(r.disabled=g.length===0)})),y&&w&&y.addEventListener("change",function(){const g=y.value;g&&g!=="custom"?(w.value=Pt[g]||"",w.disabled=!0):(w.disabled=!1,g===""&&(w.value=""))}),document.querySelectorAll("details").forEach(function(g){g.addEventListener("toggle",function(){const b=g.querySelector(".details-icon");b&&(b.style.transform=g.open?"rotate(180deg)":"rotate(0deg)")})}),r&&r.addEventListener("click",Nt),E&&E.addEventListener("click",function(){const g=document.getElementById("ocr-text-output");g&&navigator.clipboard.writeText(g.value).then(function(){E.innerHTML='<i data-lucide="check" class="w-4 h-4 text-green-400"></i>',ee({icons:te}),setTimeout(function(){E.innerHTML='<i data-lucide="clipboard-copy" class="w-4 h-4 text-gray-300"></i>',ee({icons:te})},2e3)})}),k&&k.addEventListener("click",function(){const g=document.getElementById("ocr-text-output");if(g){const b=new Blob([g.value],{type:"text/plain"});Te(b,"ocr-text.txt")}}),I&&I.addEventListener("click",function(){z.searchablePdfBytes&&Te(new Blob([new Uint8Array(z.searchablePdfBytes)],{type:"application/pdf"}),"searchable.pdf")})});
