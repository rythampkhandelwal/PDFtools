import{G as C,c as E,i as x,n as f,o as h,p as D,f as A,j as T,g as S,r as N,d as j}from"./main-Dzxg2eZZ.js";import"./mobileMenu-CQFcDk7p.js";import"./full-width-CrKHpSp0.js";import"./simple-mode-footer-rW7ABm1-.js";import{P as B}from"./PDFButton-_8Cap8jz.js";import"./index-DMQTJy3b.js";C.workerSrc=new URL("/assets/pdf.worker.min-qwK7q_zL.mjs",import.meta.url).toString();const o={file:null,pdfDoc:null};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",v):v();function v(){E({icons:x});const t=document.getElementById("file-input"),e=document.getElementById("drop-zone"),a=document.getElementById("back-to-tools"),s=document.getElementById("process-btn");t&&(t.addEventListener("change",z),t.addEventListener("click",()=>{t.value=""})),e&&(e.addEventListener("dragover",n=>{n.preventDefault(),e.classList.add("border-indigo-500")}),e.addEventListener("dragleave",()=>{e.classList.remove("border-indigo-500")}),e.addEventListener("drop",n=>{n.preventDefault(),e.classList.remove("border-indigo-500"),n.dataTransfer?.files.length&&L(n.dataTransfer.files)})),a&&a.addEventListener("click",()=>{window.location.href="/"}),s&&s.addEventListener("click",M)}function z(t){const e=t.target;e.files?.length&&L(e.files)}async function L(t){const e=t[0];if(!e||e.type!=="application/pdf"){f("Invalid File","Please upload a valid PDF file.");return}h("Loading PDF...");try{const a=await e.arrayBuffer();o.pdfDoc=await B.load(a),o.file=e,H(),document.getElementById("options-panel")?.classList.remove("hidden")}catch(a){console.error(a),f("Error","Failed to load PDF file.")}finally{D()}}function H(){const t=document.getElementById("file-display-area");if(!t||!o.file||!o.pdfDoc)return;t.innerHTML="";const e=document.createElement("div");e.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg";const a=document.createElement("div");a.className="flex flex-col flex-1 min-w-0";const s=document.createElement("div");s.className="truncate font-medium text-gray-200 text-sm mb-1",s.textContent=o.file.name;const n=document.createElement("div");n.className="text-xs text-gray-400",n.textContent=`${A(o.file.size)} â€¢ ${o.pdfDoc.getPageCount()} pages`,a.append(s,n);const i=document.createElement("button");i.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",i.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',i.onclick=P,e.append(a,i),t.appendChild(e),E({icons:x})}function P(){o.file=null,o.pdfDoc=null;const t=document.getElementById("file-display-area");t&&(t.innerHTML=""),document.getElementById("options-panel")?.classList.add("hidden");const e=document.getElementById("file-input");e&&(e.value="")}async function M(){if(!o.pdfDoc||!o.file){f("Error","Please upload a PDF file first.");return}const t=document.getElementById("text-color-input").value,{r:e,g:a,b:s}=T(t),n=120;h("Changing text color...");try{const i=await B.create(),g=await S(await N(o.file)).promise;for(let m=1;m<=g.numPages;m++){h(`Processing page ${m} of ${g.numPages}...`);const w=await g.getPage(m),l=w.getViewport({scale:2}),d=document.createElement("canvas");d.width=l.width,d.height=l.height;const p=d.getContext("2d");await w.render({canvasContext:p,viewport:l,canvas:d}).promise;const y=p.getImageData(0,0,d.width,d.height),c=y.data;for(let r=0;r<c.length;r+=4)c[r]<n&&c[r+1]<n&&c[r+2]<n&&(c[r]=e*255,c[r+1]=a*255,c[r+2]=s*255);p.putImageData(y,0,0);const b=await new Promise(r=>d.toBlob(k=>{const u=new FileReader;u.onload=()=>r(new Uint8Array(u.result)),u.readAsArrayBuffer(k)},"image/png")),F=await i.embedPng(b);i.addPage([l.width,l.height]).drawImage(F,{x:0,y:0,width:l.width,height:l.height})}const I=await i.save();j(new Blob([new Uint8Array(I)],{type:"application/pdf"}),"text-color-changed.pdf"),f("Success","Text color changed successfully!","success",()=>{P()})}catch(i){console.error(i),f("Error","Could not change text color.")}finally{D()}}
