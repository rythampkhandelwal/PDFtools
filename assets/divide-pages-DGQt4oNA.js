import{n as f,f as v,c as w,i as D,o as u,p as g,d as L}from"./main-Dzxg2eZZ.js";import"./mobileMenu-CQFcDk7p.js";import"./full-width-CrKHpSp0.js";import"./simple-mode-footer-rW7ABm1-.js";import{P as E}from"./PDFButton-_8Cap8jz.js";import"./index-DMQTJy3b.js";const o={file:null,pdfDoc:null};function y(){o.file=null,o.pdfDoc=null;const n=document.getElementById("file-display-area");n&&(n.innerHTML="");const e=document.getElementById("tool-options");e&&e.classList.add("hidden");const t=document.getElementById("file-input");t&&(t.value="");const s=document.getElementById("split-type");s&&(s.value="vertical")}async function B(){const n=document.getElementById("file-display-area"),e=document.getElementById("tool-options");if(n)if(n.innerHTML="",o.file){const t=document.createElement("div");t.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const s=document.createElement("div");s.className="flex flex-col overflow-hidden";const a=document.createElement("div");a.className="truncate font-medium text-gray-200 text-sm mb-1",a.textContent=o.file.name;const l=document.createElement("div");l.className="text-xs text-gray-400",l.textContent=`${v(o.file.size)} • Loading...`,s.append(a,l);const i=document.createElement("button");i.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",i.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',i.onclick=function(){y()},t.append(s,i),n.appendChild(t),w({icons:D});try{u("Loading PDF...");const c=await o.file.arrayBuffer();o.pdfDoc=await E.load(c,{ignoreEncryption:!0,throwOnInvalidObject:!1}),g();const r=o.pdfDoc.getPageCount();l.textContent=`${v(o.file.size)} • ${r} pages`,e&&e.classList.remove("hidden")}catch(c){console.error("Error loading PDF:",c),g(),f("Error","Failed to load PDF file."),y()}}else e&&e.classList.add("hidden")}async function P(){if(!o.pdfDoc||!o.file){f("Error","Please upload a PDF first.");return}const e=document.getElementById("split-type").value;u("Splitting PDF pages...");try{const t=await E.create(),s=o.pdfDoc.getPages();for(let i=0;i<s.length;i++){const c=s[i],{width:r,height:d}=c.getSize();u(`Processing page ${i+1} of ${s.length}...`);const[p]=await t.copyPages(o.pdfDoc,[i]),[m]=await t.copyPages(o.pdfDoc,[i]);switch(e){case"vertical":p.setCropBox(0,0,r/2,d),m.setCropBox(r/2,0,r/2,d);break;case"horizontal":p.setCropBox(0,d/2,r,d/2),m.setCropBox(0,0,r,d/2);break}t.addPage(p),t.addPage(m)}const a=await t.save(),l=o.file.name.replace(/\.pdf$/i,"");L(new Blob([new Uint8Array(a)],{type:"application/pdf"}),`${l}_divided.pdf`),f("Success","Pages have been divided successfully!","success",function(){y()})}catch(t){console.error(t),f("Error","An error occurred while dividing the PDF.")}finally{g()}}function h(n){if(n&&n.length>0){const e=n[0];(e.type==="application/pdf"||e.name.toLowerCase().endsWith(".pdf"))&&(o.file=e,B())}}document.addEventListener("DOMContentLoaded",function(){const n=document.getElementById("file-input"),e=document.getElementById("drop-zone"),t=document.getElementById("process-btn"),s=document.getElementById("back-to-tools");s&&s.addEventListener("click",function(){window.location.href="/"}),n&&e&&(n.addEventListener("change",function(a){h(a.target.files)}),e.addEventListener("dragover",function(a){a.preventDefault(),e.classList.add("bg-gray-700")}),e.addEventListener("dragleave",function(a){a.preventDefault(),e.classList.remove("bg-gray-700")}),e.addEventListener("drop",function(a){a.preventDefault(),e.classList.remove("bg-gray-700");const l=a.dataTransfer?.files;if(l&&l.length>0){const i=Array.from(l).filter(function(c){return c.type==="application/pdf"||c.name.toLowerCase().endsWith(".pdf")});if(i.length>0){const c=new DataTransfer;c.items.add(i[0]),h(c.files)}}}),n.addEventListener("click",function(){n.value=""})),t&&t.addEventListener("click",P)});
