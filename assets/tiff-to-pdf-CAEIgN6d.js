import{n as J,o as Dt,r as At,d as Pt,p as Tt,f as Bt,c as Ct,i as Lt}from"./main-Dzxg2eZZ.js";import"./mobileMenu-CQFcDk7p.js";import"./full-width-CrKHpSp0.js";import"./simple-mode-footer-rW7ABm1-.js";import{P as Rt}from"./PDFButton-_8Cap8jz.js";import"./index-DMQTJy3b.js";const de={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},at={};for(const i in de)at[de[i]]=Number(i);const Ft=Object.freeze(Object.defineProperty({__proto__:null,tagsById:de,tagsByName:at},Symbol.toStringTag,{value:"Module"})),ue={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},rt={};for(const i in ue)rt[ue[i]]=Number(i);const Mt=Object.freeze(Object.defineProperty({__proto__:null,tagsById:ue,tagsByName:rt},Symbol.toStringTag,{value:"Module"})),xe={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},st={};for(const i in xe)st[xe[i]]=Number(i);const Ut=Object.freeze(Object.defineProperty({__proto__:null,tagsById:xe,tagsByName:st},Symbol.toStringTag,{value:"Module"}));function ye(i,t="utf8"){return new TextDecoder(t).decode(i)}const Ot=new TextEncoder;function Nt(i){return Ot.encode(i)}const Gt=1024*8,$t=(()=>{const i=new Uint8Array(4),t=new Uint32Array(i.buffer);return!((t[0]=1)&i[0])})(),ne={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class ee{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=Gt,e={}){let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const o=e.offset?e.offset>>>0:0,a=t.byteLength-o;let h=o;(ArrayBuffer.isView(t)||t instanceof ee)&&(t.byteLength!==t.buffer.byteLength&&(h=t.byteOffset+o),t=t.buffer),n?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=t,this.length=a,this.byteLength=a,this.byteOffset=h,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,h,a),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,o=new Uint8Array(n);o.set(new Uint8Array(this.buffer)),this.buffer=o.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,e){const n=ne[e].BYTES_PER_ELEMENT*t,o=this.byteOffset+this.offset,a=this.buffer.slice(o,o+n);if(this.littleEndian===$t&&e!=="uint8"&&e!=="int8"){const l=new Uint8Array(this.buffer.slice(o,o+n));l.reverse();const g=new ne[e](l.buffer);return this.offset+=n,g.reverse(),g}const h=new ne[e](a);return this.offset+=n,h}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let e="";for(let n=0;n<t;n++)e+=this.readChar();return e}readUtf8(t=1){return ye(this.readBytes(t))}decodeText(t=1,e="utf8"){return ye(this.readBytes(t),e)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e));return this}writeUtf8(t){return this.writeBytes(Nt(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function zt(i){if(i.compression!==1)throw new Error("missing mandatory StripByteCounts field in compressed image");const t=i.rowsPerStrip*i.width*i.samplesPerPixel*(i.bitsPerSample/8);return new Array(i.stripOffsets.length).fill(t)}function Ht(i,t,e){let n=0;for(;n<i.length;){for(let o=e;o<t*e;o+=e)for(let a=0;a<e;a++)i[n+o+a]=i[n+o+a]+i[n+o-(e-a)]&255;n+=t*e}}function Wt(i,t,e){let n=0;for(;n<i.length;){for(let o=e;o<t*e;o+=e)for(let a=0;a<e;a++)i[n+o+a]=i[n+o+a]+i[n+o-(e-a)]&65535;n+=t*e}}const _e={standard:Ut,exif:Ft,gps:Mt};class ot{kind;data;fields;exif;gps;_hasMap;_map;constructor(t){if(!t)throw new Error("missing kind");this.data=new Uint8Array,this.fields=new Map,this.kind=t,this._hasMap=!1,this._map={}}get(t){if(typeof t=="number")return this.fields.get(t);if(typeof t=="string")return this.fields.get(_e[this.kind].tagsByName[t]);throw new Error("expected a number or string")}get map(){if(!this._hasMap){const t=_e[this.kind].tagsById;for(const e of this.fields.keys())t[e]&&(this._map[t[e]]=this.fields.get(e));this._hasMap=!0}return this._map}}const lt=new Map([[1,[1,Se]],[2,[1,jt]],[3,[2,Yt]],[4,[4,Xt]],[5,[8,Kt]],[6,[1,Jt]],[7,[1,Se]],[8,[2,Qt]],[9,[4,qt]],[10,[8,ei]],[11,[4,ti]],[12,[8,ii]]]);function Zt(i,t){const e=lt.get(i);if(!e)throw new Error(`type not found: ${i}`);return e[0]*t}function Vt(i,t,e){const n=lt.get(t);if(!n)throw new Error(`type not found: ${t}`);return n[1](i,e)}function Se(i,t){if(t===1)return i.readUint8();const e=new Uint8Array(t);for(let n=0;n<t;n++)e[n]=i.readUint8();return e}function jt(i,t){const e=[];let n="";for(let o=0;o<t;o++){const a=String.fromCharCode(i.readUint8());a==="\0"?(e.push(n),n=""):n+=a}return e.length===1?e[0]:e}function Yt(i,t){if(t===1)return i.readUint16();const e=new Uint16Array(t);for(let n=0;n<t;n++)e[n]=i.readUint16();return e}function Xt(i,t){if(t===1)return i.readUint32();const e=new Uint32Array(t);for(let n=0;n<t;n++)e[n]=i.readUint32();return e}function Kt(i,t){if(t===1)return i.readUint32()/i.readUint32();const e=new Array(t);for(let n=0;n<t;n++)e[n]=i.readUint32()/i.readUint32();return e}function Jt(i,t){if(t===1)return i.readInt8();const e=new Int8Array(t);for(let n=0;n<t;n++)e[n]=i.readInt8();return e}function Qt(i,t){if(t===1)return i.readInt16();const e=new Int16Array(t);for(let n=0;n<t;n++)e[n]=i.readInt16();return e}function qt(i,t){if(t===1)return i.readInt32();const e=new Int32Array(t);for(let n=0;n<t;n++)e[n]=i.readInt32();return e}function ei(i,t){if(t===1)return i.readInt32()/i.readInt32();const e=new Array(t);for(let n=0;n<t;n++)e[n]=i.readInt32()/i.readInt32();return e}function ti(i,t){if(t===1)return i.readFloat32();const e=new Float32Array(t);for(let n=0;n<t;n++)e[n]=i.readFloat32();return e}function ii(i,t){if(t===1)return i.readFloat64();const e=new Float64Array(t);for(let n=0;n<t;n++)e[n]=i.readFloat64();return e}const ni=256,ke=257,Ee=258,ve=9;let M=[];function ai(){if(M.length===0){for(let t=0;t<256;t++)M.push([t]);const i=[];for(let t=256;t<4096;t++)M.push(i)}}const ri=[511,1023,2047,4095],si=[0,0,0,0,0,0,0,0,0,511,1023,2047,4095];class oi{stripArray;nextData=0;nextBits=0;bytePointer=0;tableLength=Ee;currentBitLength=ve;outData;constructor(t){this.stripArray=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),this.outData=new ee(t.byteLength),this.initializeTable()}decode(){let t=0,e=0;for(;(t=this.getNextCode())!==ke;)if(t===ni){if(this.initializeTable(),t=this.getNextCode(),t===ke)break;this.writeString(this.stringFromCode(t)),e=t}else if(this.isInTable(t))this.writeString(this.stringFromCode(t)),this.addStringToTable(this.stringFromCode(e).concat(this.stringFromCode(t)[0])),e=t;else{const o=this.stringFromCode(e).concat(this.stringFromCode(e)[0]);this.writeString(o),this.addStringToTable(o),e=t}const n=this.outData.toArray();return new DataView(n.buffer,n.byteOffset,n.byteLength)}initializeTable(){ai(),this.tableLength=Ee,this.currentBitLength=ve}writeString(t){this.outData.writeBytes(t)}stringFromCode(t){return M[t]}isInTable(t){return t<this.tableLength}addStringToTable(t){if(M[this.tableLength++]=t,M.length>4096)throw M=[],new Error("LZW decoding error. Please open an issue at https://github.com/image-js/tiff/issues/new/choose (include a test image).");this.tableLength===si[this.currentBitLength]&&this.currentBitLength++}getNextCode(){this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8,this.nextBits<this.currentBitLength&&(this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8);const t=this.nextData>>this.nextBits-this.currentBitLength&ri[this.currentBitLength-9];return this.nextBits-=this.currentBitLength,this.bytePointer>this.stripArray.length?257:t}}function li(i){return new oi(i).decode()}const fi=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class Ie extends ot{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){const t=new Date,e=fi.exec(this.dateTime);if(e===null)throw new Error(`invalid dateTime: ${this.dateTime}`);return t.setFullYear(Number(e[1]),Number(e[2])-1,Number(e[3])),t.setHours(Number(e[4]),Number(e[5]),Number(e[6])),t}get newSubfileType(){return this.get("NewSubfileType")}get imageWidth(){return this.get("ImageWidth")}get imageLength(){return this.get("ImageLength")}get bitsPerSample(){const t=this.get("BitsPerSample");return t&&typeof t!="number"?t[0]:t}get alpha(){const t=this.extraSamples;return t?t[0]!==0:!1}get associatedAlpha(){const t=this.extraSamples;return t?t[0]===1:!1}get extraSamples(){return N(this.get("ExtraSamples"))}get compression(){return this.get("Compression")||1}get type(){return this.get("PhotometricInterpretation")}get fillOrder(){return this.get("FillOrder")||1}get documentName(){return this.get("DocumentName")}get imageDescription(){return this.get("ImageDescription")}get stripOffsets(){return N(this.get("StripOffsets"))}get orientation(){return this.get("Orientation")}get samplesPerPixel(){return this.get("SamplesPerPixel")||1}get rowsPerStrip(){return this.get("RowsPerStrip")||2**32-1}get stripByteCounts(){return N(this.get("StripByteCounts"))}get minSampleValue(){return this.get("MinSampleValue")||0}get maxSampleValue(){return this.get("MaxSampleValue")||2**this.bitsPerSample-1}get xResolution(){return this.get("XResolution")}get yResolution(){return this.get("YResolution")}get planarConfiguration(){return this.get("PlanarConfiguration")||1}get resolutionUnit(){return this.get("ResolutionUnit")||2}get dateTime(){return this.get("DateTime")}get predictor(){return this.get("Predictor")||1}get sampleFormat(){return N(this.get("SampleFormat")||1)[0]}get sMinSampleValue(){return this.get("SMinSampleValue")||this.minSampleValue}get sMaxSampleValue(){return this.get("SMaxSampleValue")||this.maxSampleValue}get palette(){const t=2**this.bitsPerSample,e=this.get("ColorMap");if(!e)return;if(e.length!==3*t)throw new Error(`ColorMap size must be ${t}`);const n=[];for(let o=0;o<t;o++)n.push([e[o],e[o+t],e[o+2*t]]);return n}get tileWidth(){return this.get("TileWidth")}get tileHeight(){return this.get("TileLength")}get tileOffsets(){return N(this.get("TileOffsets"))}get tileByteCounts(){return N(this.get("TileByteCounts"))}get tiled(){return this.tileWidth!==void 0&&this.tileHeight!==void 0&&this.tileOffsets!==void 0&&this.tileByteCounts!==void 0}}function N(i){return typeof i=="number"?[i]:i}function $(i){let t=i.length;for(;--t>=0;)i[t]=0}const hi=3,ci=258,ft=29,di=256,ui=di+1+ft,ht=30,xi=512,gi=new Array((ui+2)*2);$(gi);const bi=new Array(ht*2);$(bi);const wi=new Array(xi);$(wi);const pi=new Array(ci-hi+1);$(pi);const mi=new Array(ft);$(mi);const yi=new Array(ht);$(yi);const _i=(i,t,e,n)=>{let o=i&65535|0,a=i>>>16&65535|0,h=0;for(;e!==0;){h=e>2e3?2e3:e,e-=h;do o=o+t[n++]|0,a=a+o|0;while(--h);o%=65521,a%=65521}return o|a<<16|0};var ge=_i;const Si=()=>{let i,t=[];for(var e=0;e<256;e++){i=e;for(var n=0;n<8;n++)i=i&1?3988292384^i>>>1:i>>>1;t[e]=i}return t},ki=new Uint32Array(Si()),Ei=(i,t,e,n)=>{const o=ki,a=n+e;i^=-1;for(let h=n;h<a;h++)i=i>>>8^o[(i^t[h])&255];return i^-1};var T=Ei,be={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ct={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const vi=(i,t)=>Object.prototype.hasOwnProperty.call(i,t);var Ii=function(i){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const e=t.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const n in e)vi(e,n)&&(i[n]=e[n])}}return i},Di=i=>{let t=0;for(let n=0,o=i.length;n<o;n++)t+=i[n].length;const e=new Uint8Array(t);for(let n=0,o=0,a=i.length;n<a;n++){let h=i[n];e.set(h,o),o+=h.length}return e},dt={assign:Ii,flattenChunks:Di};let ut=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ut=!1}const H=new Uint8Array(256);for(let i=0;i<256;i++)H[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;H[254]=H[254]=1;var Ai=i=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(i);let t,e,n,o,a,h=i.length,l=0;for(o=0;o<h;o++)e=i.charCodeAt(o),(e&64512)===55296&&o+1<h&&(n=i.charCodeAt(o+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),o++)),l+=e<128?1:e<2048?2:e<65536?3:4;for(t=new Uint8Array(l),a=0,o=0;a<l;o++)e=i.charCodeAt(o),(e&64512)===55296&&o+1<h&&(n=i.charCodeAt(o+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),o++)),e<128?t[a++]=e:e<2048?(t[a++]=192|e>>>6,t[a++]=128|e&63):e<65536?(t[a++]=224|e>>>12,t[a++]=128|e>>>6&63,t[a++]=128|e&63):(t[a++]=240|e>>>18,t[a++]=128|e>>>12&63,t[a++]=128|e>>>6&63,t[a++]=128|e&63);return t};const Pi=(i,t)=>{if(t<65534&&i.subarray&&ut)return String.fromCharCode.apply(null,i.length===t?i:i.subarray(0,t));let e="";for(let n=0;n<t;n++)e+=String.fromCharCode(i[n]);return e};var Ti=(i,t)=>{const e=t||i.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(i.subarray(0,t));let n,o;const a=new Array(e*2);for(o=0,n=0;n<e;){let h=i[n++];if(h<128){a[o++]=h;continue}let l=H[h];if(l>4){a[o++]=65533,n+=l-1;continue}for(h&=l===2?31:l===3?15:7;l>1&&n<e;)h=h<<6|i[n++]&63,l--;if(l>1){a[o++]=65533;continue}h<65536?a[o++]=h:(h-=65536,a[o++]=55296|h>>10&1023,a[o++]=56320|h&1023)}return Pi(a,o)},Bi=(i,t)=>{t=t||i.length,t>i.length&&(t=i.length);let e=t-1;for(;e>=0&&(i[e]&192)===128;)e--;return e<0||e===0?t:e+H[i[e]]>t?e:t},we={string2buf:Ai,buf2string:Ti,utf8border:Bi};function Ci(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Li=Ci;const j=16209,Ri=16191;var Fi=function(t,e){let n,o,a,h,l,g,r,s,S,u,f,d,I,b,p,E,m,c,y,A,x,v,_,w;const k=t.state;n=t.next_in,_=t.input,o=n+(t.avail_in-5),a=t.next_out,w=t.output,h=a-(e-t.avail_out),l=a+(t.avail_out-257),g=k.dmax,r=k.wsize,s=k.whave,S=k.wnext,u=k.window,f=k.hold,d=k.bits,I=k.lencode,b=k.distcode,p=(1<<k.lenbits)-1,E=(1<<k.distbits)-1;e:do{d<15&&(f+=_[n++]<<d,d+=8,f+=_[n++]<<d,d+=8),m=I[f&p];t:for(;;){if(c=m>>>24,f>>>=c,d-=c,c=m>>>16&255,c===0)w[a++]=m&65535;else if(c&16){y=m&65535,c&=15,c&&(d<c&&(f+=_[n++]<<d,d+=8),y+=f&(1<<c)-1,f>>>=c,d-=c),d<15&&(f+=_[n++]<<d,d+=8,f+=_[n++]<<d,d+=8),m=b[f&E];i:for(;;){if(c=m>>>24,f>>>=c,d-=c,c=m>>>16&255,c&16){if(A=m&65535,c&=15,d<c&&(f+=_[n++]<<d,d+=8,d<c&&(f+=_[n++]<<d,d+=8)),A+=f&(1<<c)-1,A>g){t.msg="invalid distance too far back",k.mode=j;break e}if(f>>>=c,d-=c,c=a-h,A>c){if(c=A-c,c>s&&k.sane){t.msg="invalid distance too far back",k.mode=j;break e}if(x=0,v=u,S===0){if(x+=r-c,c<y){y-=c;do w[a++]=u[x++];while(--c);x=a-A,v=w}}else if(S<c){if(x+=r+S-c,c-=S,c<y){y-=c;do w[a++]=u[x++];while(--c);if(x=0,S<y){c=S,y-=c;do w[a++]=u[x++];while(--c);x=a-A,v=w}}}else if(x+=S-c,c<y){y-=c;do w[a++]=u[x++];while(--c);x=a-A,v=w}for(;y>2;)w[a++]=v[x++],w[a++]=v[x++],w[a++]=v[x++],y-=3;y&&(w[a++]=v[x++],y>1&&(w[a++]=v[x++]))}else{x=a-A;do w[a++]=w[x++],w[a++]=w[x++],w[a++]=w[x++],y-=3;while(y>2);y&&(w[a++]=w[x++],y>1&&(w[a++]=w[x++]))}}else if((c&64)===0){m=b[(m&65535)+(f&(1<<c)-1)];continue i}else{t.msg="invalid distance code",k.mode=j;break e}break}}else if((c&64)===0){m=I[(m&65535)+(f&(1<<c)-1)];continue t}else if(c&32){k.mode=Ri;break e}else{t.msg="invalid literal/length code",k.mode=j;break e}break}}while(n<o&&a<l);y=d>>3,n-=y,d-=y<<3,f&=(1<<d)-1,t.next_in=n,t.next_out=a,t.avail_in=n<o?5+(o-n):5-(n-o),t.avail_out=a<l?257+(l-a):257-(a-l),k.hold=f,k.bits=d};const G=15,De=852,Ae=592,Pe=0,ae=1,Te=2,Mi=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ui=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Oi=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ni=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Gi=(i,t,e,n,o,a,h,l)=>{const g=l.bits;let r=0,s=0,S=0,u=0,f=0,d=0,I=0,b=0,p=0,E=0,m,c,y,A,x,v=null,_;const w=new Uint16Array(G+1),k=new Uint16Array(G+1);let F=null,me,Z,V;for(r=0;r<=G;r++)w[r]=0;for(s=0;s<n;s++)w[t[e+s]]++;for(f=g,u=G;u>=1&&w[u]===0;u--);if(f>u&&(f=u),u===0)return o[a++]=1<<24|64<<16|0,o[a++]=1<<24|64<<16|0,l.bits=1,0;for(S=1;S<u&&w[S]===0;S++);for(f<S&&(f=S),b=1,r=1;r<=G;r++)if(b<<=1,b-=w[r],b<0)return-1;if(b>0&&(i===Pe||u!==1))return-1;for(k[1]=0,r=1;r<G;r++)k[r+1]=k[r]+w[r];for(s=0;s<n;s++)t[e+s]!==0&&(h[k[t[e+s]]++]=s);if(i===Pe?(v=F=h,_=20):i===ae?(v=Mi,F=Ui,_=257):(v=Oi,F=Ni,_=0),E=0,s=0,r=S,x=a,d=f,I=0,y=-1,p=1<<f,A=p-1,i===ae&&p>De||i===Te&&p>Ae)return 1;for(;;){me=r-I,h[s]+1<_?(Z=0,V=h[s]):h[s]>=_?(Z=F[h[s]-_],V=v[h[s]-_]):(Z=96,V=0),m=1<<r-I,c=1<<d,S=c;do c-=m,o[x+(E>>I)+c]=me<<24|Z<<16|V|0;while(c!==0);for(m=1<<r-1;E&m;)m>>=1;if(m!==0?(E&=m-1,E+=m):E=0,s++,--w[r]===0){if(r===u)break;r=t[e+h[s]]}if(r>f&&(E&A)!==y){for(I===0&&(I=f),x+=S,d=r-I,b=1<<d;d+I<u&&(b-=w[d+I],!(b<=0));)d++,b<<=1;if(p+=1<<d,i===ae&&p>De||i===Te&&p>Ae)return 1;y=E&A,o[y]=f<<24|d<<16|x-a|0}}return E!==0&&(o[x+E]=r-I<<24|64<<16|0),l.bits=f,0};var z=Gi;const $i=0,xt=1,gt=2,{Z_FINISH:Be,Z_BLOCK:zi,Z_TREES:Y,Z_OK:U,Z_STREAM_END:Hi,Z_NEED_DICT:Wi,Z_STREAM_ERROR:P,Z_DATA_ERROR:bt,Z_MEM_ERROR:wt,Z_BUF_ERROR:Zi,Z_DEFLATED:Ce}=ct,te=16180,Le=16181,Re=16182,Fe=16183,Me=16184,Ue=16185,Oe=16186,Ne=16187,Ge=16188,$e=16189,Q=16190,B=16191,re=16192,ze=16193,se=16194,He=16195,We=16196,Ze=16197,Ve=16198,X=16199,K=16200,je=16201,Ye=16202,Xe=16203,Ke=16204,Je=16205,oe=16206,Qe=16207,qe=16208,D=16209,pt=16210,mt=16211,Vi=852,ji=592,Yi=15,Xi=Yi,et=i=>(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24);function Ki(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const O=i=>{if(!i)return 1;const t=i.state;return!t||t.strm!==i||t.mode<te||t.mode>mt?1:0},yt=i=>{if(O(i))return P;const t=i.state;return i.total_in=i.total_out=t.total=0,i.msg="",t.wrap&&(i.adler=t.wrap&1),t.mode=te,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(Vi),t.distcode=t.distdyn=new Int32Array(ji),t.sane=1,t.back=-1,U},_t=i=>{if(O(i))return P;const t=i.state;return t.wsize=0,t.whave=0,t.wnext=0,yt(i)},St=(i,t)=>{let e;if(O(i))return P;const n=i.state;return t<0?(e=0,t=-t):(e=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?P:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=e,n.wbits=t,_t(i))},kt=(i,t)=>{if(!i)return P;const e=new Ki;i.state=e,e.strm=i,e.window=null,e.mode=te;const n=St(i,t);return n!==U&&(i.state=null),n},Ji=i=>kt(i,Xi);let tt=!0,le,fe;const Qi=i=>{if(tt){le=new Int32Array(512),fe=new Int32Array(32);let t=0;for(;t<144;)i.lens[t++]=8;for(;t<256;)i.lens[t++]=9;for(;t<280;)i.lens[t++]=7;for(;t<288;)i.lens[t++]=8;for(z(xt,i.lens,0,288,le,0,i.work,{bits:9}),t=0;t<32;)i.lens[t++]=5;z(gt,i.lens,0,32,fe,0,i.work,{bits:5}),tt=!1}i.lencode=le,i.lenbits=9,i.distcode=fe,i.distbits=5},Et=(i,t,e,n)=>{let o;const a=i.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(e-a.wsize,e),0),a.wnext=0,a.whave=a.wsize):(o=a.wsize-a.wnext,o>n&&(o=n),a.window.set(t.subarray(e-n,e-n+o),a.wnext),n-=o,n?(a.window.set(t.subarray(e-n,e),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0},qi=(i,t)=>{let e,n,o,a,h,l,g,r,s,S,u,f,d,I,b=0,p,E,m,c,y,A,x,v;const _=new Uint8Array(4);let w,k;const F=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(O(i)||!i.output||!i.input&&i.avail_in!==0)return P;e=i.state,e.mode===B&&(e.mode=re),h=i.next_out,o=i.output,g=i.avail_out,a=i.next_in,n=i.input,l=i.avail_in,r=e.hold,s=e.bits,S=l,u=g,v=U;e:for(;;)switch(e.mode){case te:if(e.wrap===0){e.mode=re;break}for(;s<16;){if(l===0)break e;l--,r+=n[a++]<<s,s+=8}if(e.wrap&2&&r===35615){e.wbits===0&&(e.wbits=15),e.check=0,_[0]=r&255,_[1]=r>>>8&255,e.check=T(e.check,_,2,0),r=0,s=0,e.mode=Le;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((r&255)<<8)+(r>>8))%31){i.msg="incorrect header check",e.mode=D;break}if((r&15)!==Ce){i.msg="unknown compression method",e.mode=D;break}if(r>>>=4,s-=4,x=(r&15)+8,e.wbits===0&&(e.wbits=x),x>15||x>e.wbits){i.msg="invalid window size",e.mode=D;break}e.dmax=1<<e.wbits,e.flags=0,i.adler=e.check=1,e.mode=r&512?$e:B,r=0,s=0;break;case Le:for(;s<16;){if(l===0)break e;l--,r+=n[a++]<<s,s+=8}if(e.flags=r,(e.flags&255)!==Ce){i.msg="unknown compression method",e.mode=D;break}if(e.flags&57344){i.msg="unknown header flags set",e.mode=D;break}e.head&&(e.head.text=r>>8&1),e.flags&512&&e.wrap&4&&(_[0]=r&255,_[1]=r>>>8&255,e.check=T(e.check,_,2,0)),r=0,s=0,e.mode=Re;case Re:for(;s<32;){if(l===0)break e;l--,r+=n[a++]<<s,s+=8}e.head&&(e.head.time=r),e.flags&512&&e.wrap&4&&(_[0]=r&255,_[1]=r>>>8&255,_[2]=r>>>16&255,_[3]=r>>>24&255,e.check=T(e.check,_,4,0)),r=0,s=0,e.mode=Fe;case Fe:for(;s<16;){if(l===0)break e;l--,r+=n[a++]<<s,s+=8}e.head&&(e.head.xflags=r&255,e.head.os=r>>8),e.flags&512&&e.wrap&4&&(_[0]=r&255,_[1]=r>>>8&255,e.check=T(e.check,_,2,0)),r=0,s=0,e.mode=Me;case Me:if(e.flags&1024){for(;s<16;){if(l===0)break e;l--,r+=n[a++]<<s,s+=8}e.length=r,e.head&&(e.head.extra_len=r),e.flags&512&&e.wrap&4&&(_[0]=r&255,_[1]=r>>>8&255,e.check=T(e.check,_,2,0)),r=0,s=0}else e.head&&(e.head.extra=null);e.mode=Ue;case Ue:if(e.flags&1024&&(f=e.length,f>l&&(f=l),f&&(e.head&&(x=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(n.subarray(a,a+f),x)),e.flags&512&&e.wrap&4&&(e.check=T(e.check,n,f,a)),l-=f,a+=f,e.length-=f),e.length))break e;e.length=0,e.mode=Oe;case Oe:if(e.flags&2048){if(l===0)break e;f=0;do x=n[a+f++],e.head&&x&&e.length<65536&&(e.head.name+=String.fromCharCode(x));while(x&&f<l);if(e.flags&512&&e.wrap&4&&(e.check=T(e.check,n,f,a)),l-=f,a+=f,x)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=Ne;case Ne:if(e.flags&4096){if(l===0)break e;f=0;do x=n[a+f++],e.head&&x&&e.length<65536&&(e.head.comment+=String.fromCharCode(x));while(x&&f<l);if(e.flags&512&&e.wrap&4&&(e.check=T(e.check,n,f,a)),l-=f,a+=f,x)break e}else e.head&&(e.head.comment=null);e.mode=Ge;case Ge:if(e.flags&512){for(;s<16;){if(l===0)break e;l--,r+=n[a++]<<s,s+=8}if(e.wrap&4&&r!==(e.check&65535)){i.msg="header crc mismatch",e.mode=D;break}r=0,s=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),i.adler=e.check=0,e.mode=B;break;case $e:for(;s<32;){if(l===0)break e;l--,r+=n[a++]<<s,s+=8}i.adler=e.check=et(r),r=0,s=0,e.mode=Q;case Q:if(e.havedict===0)return i.next_out=h,i.avail_out=g,i.next_in=a,i.avail_in=l,e.hold=r,e.bits=s,Wi;i.adler=e.check=1,e.mode=B;case B:if(t===zi||t===Y)break e;case re:if(e.last){r>>>=s&7,s-=s&7,e.mode=oe;break}for(;s<3;){if(l===0)break e;l--,r+=n[a++]<<s,s+=8}switch(e.last=r&1,r>>>=1,s-=1,r&3){case 0:e.mode=ze;break;case 1:if(Qi(e),e.mode=X,t===Y){r>>>=2,s-=2;break e}break;case 2:e.mode=We;break;case 3:i.msg="invalid block type",e.mode=D}r>>>=2,s-=2;break;case ze:for(r>>>=s&7,s-=s&7;s<32;){if(l===0)break e;l--,r+=n[a++]<<s,s+=8}if((r&65535)!==(r>>>16^65535)){i.msg="invalid stored block lengths",e.mode=D;break}if(e.length=r&65535,r=0,s=0,e.mode=se,t===Y)break e;case se:e.mode=He;case He:if(f=e.length,f){if(f>l&&(f=l),f>g&&(f=g),f===0)break e;o.set(n.subarray(a,a+f),h),l-=f,a+=f,g-=f,h+=f,e.length-=f;break}e.mode=B;break;case We:for(;s<14;){if(l===0)break e;l--,r+=n[a++]<<s,s+=8}if(e.nlen=(r&31)+257,r>>>=5,s-=5,e.ndist=(r&31)+1,r>>>=5,s-=5,e.ncode=(r&15)+4,r>>>=4,s-=4,e.nlen>286||e.ndist>30){i.msg="too many length or distance symbols",e.mode=D;break}e.have=0,e.mode=Ze;case Ze:for(;e.have<e.ncode;){for(;s<3;){if(l===0)break e;l--,r+=n[a++]<<s,s+=8}e.lens[F[e.have++]]=r&7,r>>>=3,s-=3}for(;e.have<19;)e.lens[F[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,w={bits:e.lenbits},v=z($i,e.lens,0,19,e.lencode,0,e.work,w),e.lenbits=w.bits,v){i.msg="invalid code lengths set",e.mode=D;break}e.have=0,e.mode=Ve;case Ve:for(;e.have<e.nlen+e.ndist;){for(;b=e.lencode[r&(1<<e.lenbits)-1],p=b>>>24,E=b>>>16&255,m=b&65535,!(p<=s);){if(l===0)break e;l--,r+=n[a++]<<s,s+=8}if(m<16)r>>>=p,s-=p,e.lens[e.have++]=m;else{if(m===16){for(k=p+2;s<k;){if(l===0)break e;l--,r+=n[a++]<<s,s+=8}if(r>>>=p,s-=p,e.have===0){i.msg="invalid bit length repeat",e.mode=D;break}x=e.lens[e.have-1],f=3+(r&3),r>>>=2,s-=2}else if(m===17){for(k=p+3;s<k;){if(l===0)break e;l--,r+=n[a++]<<s,s+=8}r>>>=p,s-=p,x=0,f=3+(r&7),r>>>=3,s-=3}else{for(k=p+7;s<k;){if(l===0)break e;l--,r+=n[a++]<<s,s+=8}r>>>=p,s-=p,x=0,f=11+(r&127),r>>>=7,s-=7}if(e.have+f>e.nlen+e.ndist){i.msg="invalid bit length repeat",e.mode=D;break}for(;f--;)e.lens[e.have++]=x}}if(e.mode===D)break;if(e.lens[256]===0){i.msg="invalid code -- missing end-of-block",e.mode=D;break}if(e.lenbits=9,w={bits:e.lenbits},v=z(xt,e.lens,0,e.nlen,e.lencode,0,e.work,w),e.lenbits=w.bits,v){i.msg="invalid literal/lengths set",e.mode=D;break}if(e.distbits=6,e.distcode=e.distdyn,w={bits:e.distbits},v=z(gt,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,w),e.distbits=w.bits,v){i.msg="invalid distances set",e.mode=D;break}if(e.mode=X,t===Y)break e;case X:e.mode=K;case K:if(l>=6&&g>=258){i.next_out=h,i.avail_out=g,i.next_in=a,i.avail_in=l,e.hold=r,e.bits=s,Fi(i,u),h=i.next_out,o=i.output,g=i.avail_out,a=i.next_in,n=i.input,l=i.avail_in,r=e.hold,s=e.bits,e.mode===B&&(e.back=-1);break}for(e.back=0;b=e.lencode[r&(1<<e.lenbits)-1],p=b>>>24,E=b>>>16&255,m=b&65535,!(p<=s);){if(l===0)break e;l--,r+=n[a++]<<s,s+=8}if(E&&(E&240)===0){for(c=p,y=E,A=m;b=e.lencode[A+((r&(1<<c+y)-1)>>c)],p=b>>>24,E=b>>>16&255,m=b&65535,!(c+p<=s);){if(l===0)break e;l--,r+=n[a++]<<s,s+=8}r>>>=c,s-=c,e.back+=c}if(r>>>=p,s-=p,e.back+=p,e.length=m,E===0){e.mode=Je;break}if(E&32){e.back=-1,e.mode=B;break}if(E&64){i.msg="invalid literal/length code",e.mode=D;break}e.extra=E&15,e.mode=je;case je:if(e.extra){for(k=e.extra;s<k;){if(l===0)break e;l--,r+=n[a++]<<s,s+=8}e.length+=r&(1<<e.extra)-1,r>>>=e.extra,s-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=Ye;case Ye:for(;b=e.distcode[r&(1<<e.distbits)-1],p=b>>>24,E=b>>>16&255,m=b&65535,!(p<=s);){if(l===0)break e;l--,r+=n[a++]<<s,s+=8}if((E&240)===0){for(c=p,y=E,A=m;b=e.distcode[A+((r&(1<<c+y)-1)>>c)],p=b>>>24,E=b>>>16&255,m=b&65535,!(c+p<=s);){if(l===0)break e;l--,r+=n[a++]<<s,s+=8}r>>>=c,s-=c,e.back+=c}if(r>>>=p,s-=p,e.back+=p,E&64){i.msg="invalid distance code",e.mode=D;break}e.offset=m,e.extra=E&15,e.mode=Xe;case Xe:if(e.extra){for(k=e.extra;s<k;){if(l===0)break e;l--,r+=n[a++]<<s,s+=8}e.offset+=r&(1<<e.extra)-1,r>>>=e.extra,s-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){i.msg="invalid distance too far back",e.mode=D;break}e.mode=Ke;case Ke:if(g===0)break e;if(f=u-g,e.offset>f){if(f=e.offset-f,f>e.whave&&e.sane){i.msg="invalid distance too far back",e.mode=D;break}f>e.wnext?(f-=e.wnext,d=e.wsize-f):d=e.wnext-f,f>e.length&&(f=e.length),I=e.window}else I=o,d=h-e.offset,f=e.length;f>g&&(f=g),g-=f,e.length-=f;do o[h++]=I[d++];while(--f);e.length===0&&(e.mode=K);break;case Je:if(g===0)break e;o[h++]=e.length,g--,e.mode=K;break;case oe:if(e.wrap){for(;s<32;){if(l===0)break e;l--,r|=n[a++]<<s,s+=8}if(u-=g,i.total_out+=u,e.total+=u,e.wrap&4&&u&&(i.adler=e.check=e.flags?T(e.check,o,u,h-u):ge(e.check,o,u,h-u)),u=g,e.wrap&4&&(e.flags?r:et(r))!==e.check){i.msg="incorrect data check",e.mode=D;break}r=0,s=0}e.mode=Qe;case Qe:if(e.wrap&&e.flags){for(;s<32;){if(l===0)break e;l--,r+=n[a++]<<s,s+=8}if(e.wrap&4&&r!==(e.total&4294967295)){i.msg="incorrect length check",e.mode=D;break}r=0,s=0}e.mode=qe;case qe:v=Hi;break e;case D:v=bt;break e;case pt:return wt;case mt:default:return P}return i.next_out=h,i.avail_out=g,i.next_in=a,i.avail_in=l,e.hold=r,e.bits=s,(e.wsize||u!==i.avail_out&&e.mode<D&&(e.mode<oe||t!==Be))&&Et(i,i.output,i.next_out,u-i.avail_out),S-=i.avail_in,u-=i.avail_out,i.total_in+=S,i.total_out+=u,e.total+=u,e.wrap&4&&u&&(i.adler=e.check=e.flags?T(e.check,o,u,i.next_out-u):ge(e.check,o,u,i.next_out-u)),i.data_type=e.bits+(e.last?64:0)+(e.mode===B?128:0)+(e.mode===X||e.mode===se?256:0),(S===0&&u===0||t===Be)&&v===U&&(v=Zi),v},en=i=>{if(O(i))return P;let t=i.state;return t.window&&(t.window=null),i.state=null,U},tn=(i,t)=>{if(O(i))return P;const e=i.state;return(e.wrap&2)===0?P:(e.head=t,t.done=!1,U)},nn=(i,t)=>{const e=t.length;let n,o,a;return O(i)||(n=i.state,n.wrap!==0&&n.mode!==Q)?P:n.mode===Q&&(o=1,o=ge(o,t,e,0),o!==n.check)?bt:(a=Et(i,t,e,e),a?(n.mode=pt,wt):(n.havedict=1,U))};var an=_t,rn=St,sn=yt,on=Ji,ln=kt,fn=qi,hn=en,cn=tn,dn=nn,un="pako inflate (from Nodeca project)",L={inflateReset:an,inflateReset2:rn,inflateResetKeep:sn,inflateInit:on,inflateInit2:ln,inflate:fn,inflateEnd:hn,inflateGetHeader:cn,inflateSetDictionary:dn,inflateInfo:un};function xn(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gn=xn;const vt=Object.prototype.toString,{Z_NO_FLUSH:bn,Z_FINISH:wn,Z_OK:W,Z_STREAM_END:he,Z_NEED_DICT:ce,Z_STREAM_ERROR:pn,Z_DATA_ERROR:it,Z_MEM_ERROR:mn}=ct;function ie(i){this.options=dt.assign({chunkSize:1024*64,windowBits:15,to:""},i||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(i&&i.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Li,this.strm.avail_out=0;let e=L.inflateInit2(this.strm,t.windowBits);if(e!==W)throw new Error(be[e]);if(this.header=new gn,L.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=we.string2buf(t.dictionary):vt.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(e=L.inflateSetDictionary(this.strm,t.dictionary),e!==W)))throw new Error(be[e])}ie.prototype.push=function(i,t){const e=this.strm,n=this.options.chunkSize,o=this.options.dictionary;let a,h,l;if(this.ended)return!1;for(t===~~t?h=t:h=t===!0?wn:bn,vt.call(i)==="[object ArrayBuffer]"?e.input=new Uint8Array(i):e.input=i,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(n),e.next_out=0,e.avail_out=n),a=L.inflate(e,h),a===ce&&o&&(a=L.inflateSetDictionary(e,o),a===W?a=L.inflate(e,h):a===it&&(a=ce));e.avail_in>0&&a===he&&e.state.wrap>0&&i[e.next_in]!==0;)L.inflateReset(e),a=L.inflate(e,h);switch(a){case pn:case it:case ce:case mn:return this.onEnd(a),this.ended=!0,!1}if(l=e.avail_out,e.next_out&&(e.avail_out===0||a===he))if(this.options.to==="string"){let g=we.utf8border(e.output,e.next_out),r=e.next_out-g,s=we.buf2string(e.output,g);e.next_out=r,e.avail_out=n-r,r&&e.output.set(e.output.subarray(g,g+r),0),this.onData(s)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(a===W&&l===0)){if(a===he)return a=L.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};ie.prototype.onData=function(i){this.chunks.push(i)};ie.prototype.onEnd=function(i){i===W&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=dt.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function yn(i,t){const e=new ie(t);if(e.push(i),e.err)throw e.msg||be[e.err];return e.result}var _n=yn,Sn={inflate:_n};const{inflate:kn}=Sn;var En=kn;function vn(i){const t=new Uint8Array(i.buffer,i.byteOffset,i.byteLength),e=En(t);return new DataView(e.buffer,e.byteOffset,e.byteLength)}const In={ignoreImageData:!1};class q extends ee{_nextIFD;constructor(t){super(t),this._nextIFD=0}get isMultiPage(){let t=0;for(this.decodeHeader();this._nextIFD;)if(t++,this.decodeIFD({ignoreImageData:!0},!0),t===2)return!0;if(t===1)return!1;throw C("ifdCount",t)}get pageCount(){let t=0;for(this.decodeHeader();this._nextIFD;)t++,this.decodeIFD({ignoreImageData:!0},!0);if(t>0)return t;throw C("ifdCount",t)}decode(t={}){const{pages:e}=t;Dn(e);const n=e?Math.max(...e):1/0;t={...In,...t};const o=[];this.decodeHeader();let a=0;for(;this._nextIFD;){if(e){if(e.includes(a)?o.push(this.decodeIFD(t,!0)):this.decodeIFD({ignoreImageData:!0},!0),a===n)break}else o.push(this.decodeIFD(t,!0));a++}if(a<n&&n!==1/0)throw new RangeError(`Index ${n} is out of bounds. The stack only contains ${a} images.`);return o}decodeHeader(){const t=this.readUint16();if(t===18761)this.setLittleEndian();else if(t===19789)this.setBigEndian();else throw new Error(`invalid byte order: 0x${t.toString(16)}`);if(this.readUint16()!==42)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(t,e){this.seek(this._nextIFD);let n;if(e)n=new Ie;else{if(!t.kind)throw new Error("kind is missing");n=new ot(t.kind)}const o=this.readUint16();for(let a=0;a<o;a++)this.decodeIFDEntry(n);if(!t.ignoreImageData){if(!(n instanceof Ie))throw new Error("must be a tiff ifd");this.decodeImageData(n)}return this._nextIFD=this.readUint32(),n}decodeIFDEntry(t){const e=this.offset,n=this.readUint16(),o=this.readUint16(),a=this.readUint32();if(o<1||o>12){this.skip(4);return}Zt(o,a)>4&&this.seek(this.readUint32());const l=Vt(this,o,a);if(t.fields.set(n,l),n===34665||n===34853){const g=this.offset;let r="exif";n===34665?r="exif":n===34853&&(r="gps"),this._nextIFD=l,t[r]=this.decodeIFD({kind:r,ignoreImageData:!0},!1),this.offset=g}this.seek(e),this.skip(12)}decodeImageData(t){const e=t.orientation;if(e&&e!==1)throw C("orientation",e);switch(t.type){case 0:case 1:case 2:case 3:t.tiled?this.readTileData(t):this.readStripData(t);break;default:throw C("image type",t.type)}if(this.applyPredictor(t),this.convertAlpha(t),t.bitsPerSample===1&&this.split1BitData(t),t.type===0){const o=2**t.bitsPerSample-1;for(let a=0;a<t.data.length;a++)t.data[a]=o-t.data[a]}}split1BitData(t){const{imageWidth:e,imageLength:n,samplesPerPixel:o}=t,a=new Uint8Array(n*e*o),h=Math.ceil(e*o/8);let l=0;for(let g=0;g<n;g++){const r=g*h;for(let s=0;s<e*o;s++){const S=r+Math.floor(s/8),u=7-s%8,f=t.data[S]>>u&1;a[l++]=f}}t.data=a}static uncompress(t,e=1){switch(e){case 1:return t;case 5:return li(t);case 8:case 32946:return vn(t);case 2:throw C("Compression","CCITT Group 3");case 32773:throw C("Compression","PackBits");default:throw C("Compression",e)}}createSampleReader(t,e,n){if(e===8||e===1)return(o,a)=>o.getUint8(a);if(e===16)return(o,a)=>o.getUint16(2*a,n);if(e===32&&t===3)return(o,a)=>o.getFloat32(4*a,n);if(e===64&&t===3)return(o,a)=>o.getFloat64(8*a,n);throw C("bitDepth",e)}readStripData(t){const e=t.width,n=t.height,o=t.bitsPerSample!==1?e*t.samplesPerPixel*n:Math.ceil(e*t.samplesPerPixel/8)*n,a=t.stripOffsets,h=t.stripByteCounts||zt(t),l=this.isLittleEndian(),g=t.bitsPerSample!==1?e*t.samplesPerPixel*t.rowsPerStrip:Math.ceil(e*t.samplesPerPixel/8)*t.rowsPerStrip,r=this.createSampleReader(t.sampleFormat,t.bitsPerSample,l),s=nt(o,t.bitsPerSample,t.sampleFormat);let S=0;for(let u=0;u<a.length;u++){const f=new DataView(this.buffer,this.byteOffset+a[u],h[u]),d=q.uncompress(f,t.compression),I=Math.min(g,o-S);for(let b=0;b<I;++b){const p=r(d,b);s[S+b]=p}S+=I}t.data=s}readTileData(t){if(!t.tileWidth||!t.tileHeight)return;const e=t.width,n=t.height,o=t.bitsPerSample!==1?e*n*t.samplesPerPixel:Math.ceil(e*t.samplesPerPixel/8)*n,a=t.tileWidth,h=t.tileHeight,l=Math.ceil(e/a),g=Math.ceil(n/h),r=t.tileOffsets,s=t.tileByteCounts,S=this.isLittleEndian(),u=this.createSampleReader(t.sampleFormat,t.bitsPerSample,S),f=nt(o,t.bitsPerSample,t.sampleFormat);for(let d=0;d<l;++d)for(let I=0;I<g;++I){const b=I*l+d,p=new DataView(this.buffer,this.byteOffset+r[b],s[b]),E=q.uncompress(p,t.compression);if(t.bitsPerSample===1){const m=Math.ceil(e/8),c=Math.ceil(a/8);for(let y=0;y<h&&I*h+y<n;y++){const A=I*h+y,x=y*c,v=A*m+Math.floor(d*a/8),_=Math.min(c,m-Math.floor(d*a/8));for(let w=0;w<_;w++)f[v+w]=u(E,x+w)}}else for(let m=0;m<h;m++)for(let c=0;c<a;c++){const y=d*a+c,A=I*h+m;if(y>=e||A>=n)continue;const x=m*a+c,v=u(E,x),_=(A*e+y)*t.samplesPerPixel;f[_]=v}}t.data=f}applyPredictor(t){const e=t.bitsPerSample;switch(t.predictor){case 1:break;case 2:{if(e===8)Ht(t.data,t.width,t.components);else if(e===16)Wt(t.data,t.width,t.components);else throw new Error(`Horizontal differencing is only supported for images with a bit depth of ${e}`);break}default:throw new Error(`invalid predictor: ${t.predictor}`)}}convertAlpha(t){if(t.alpha&&t.associatedAlpha){const{data:e,components:n,maxSampleValue:o}=t;for(let a=0;a<e.length;a+=n){const h=e[a+n-1];for(let l=0;l<n-1;l++)e[a+l]=Math.round(e[a+l]*o/h)}}}}function nt(i,t,e){if(t===8||t===1)return new Uint8Array(i);if(t===16)return new Uint16Array(i);if(t===32&&e===3)return new Float32Array(i);if(t===64&&e===3)return new Float64Array(i);throw C("bit depth / sample format",`${t} / ${e}`)}function C(i,t){return new Error(`Unsupported ${i}: ${t}`)}function Dn(i){if(i){for(const t of i)if(t<0||!Number.isInteger(t))throw new RangeError(`Index ${t} is invalid. Must be a positive integer.`)}}function An(i,t){return new q(i).decode(t)}let R=[];const pe=()=>{const i=document.getElementById("file-display-area"),t=document.getElementById("file-controls"),e=document.getElementById("process-btn");!i||!t||!e||(i.innerHTML="",R.length>0?(t.classList.remove("hidden"),e.classList.remove("hidden"),R.forEach((n,o)=>{const a=document.createElement("div");a.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg text-sm";const h=document.createElement("div");h.className="flex items-center gap-2 overflow-hidden";const l=document.createElement("span");l.className="truncate font-medium text-gray-200",l.textContent=n.name;const g=document.createElement("span");g.className="flex-shrink-0 text-gray-400 text-xs",g.textContent=`(${Bt(n.size)})`,h.append(l,g);const r=document.createElement("button");r.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",r.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',r.onclick=()=>{R=R.filter((s,S)=>S!==o),pe()},a.append(h,r),i.appendChild(a)}),Ct({icons:Lt})):(t.classList.add("hidden"),e.classList.add("hidden")))},It=()=>{R=[],pe()};async function Pn(){if(R.length===0){J("No Files","Please select at least one TIFF file.");return}Dt("Converting TIFF to PDF...");try{const i=await Rt.create();for(const e of R){const n=await At(e),o=An(n);for(const a of o){const h=a.width,l=a.height,g=a.data,r=document.createElement("canvas");r.width=h,r.height=l;const s=r.getContext("2d");if(!s)continue;const S=s.createImageData(h,l);for(let b=0;b<g.length;b++)S.data[b]=g[b];s.putImageData(S,0,0);const u=await new Promise(b=>r.toBlob(b,"image/png"));if(!u)continue;const f=await u.arrayBuffer(),d=await i.embedPng(f);i.addPage([d.width,d.height]).drawImage(d,{x:0,y:0,width:d.width,height:d.height})}}const t=await i.save();Pt(new Blob([new Uint8Array(t)],{type:"application/pdf"}),"from_tiff.pdf"),J("Success","PDF created successfully!","success",()=>{It()})}catch(i){console.error(i),J("Error","Failed to convert TIFF to PDF. One of the files may be invalid.")}finally{Tt()}}document.addEventListener("DOMContentLoaded",()=>{const i=document.getElementById("file-input"),t=document.getElementById("drop-zone"),e=document.getElementById("add-more-btn"),n=document.getElementById("clear-files-btn"),o=document.getElementById("process-btn"),a=document.getElementById("back-to-tools");a&&a.addEventListener("click",()=>{window.location.href="/"});const h=l=>{if(!l||l.length===0)return;const g=Array.from(l).filter(r=>r.type==="image/tiff"||r.name.toLowerCase().endsWith(".tiff")||r.name.toLowerCase().endsWith(".tif"));g.length<l.length&&J("Invalid Files","Some files were skipped. Only TIFF files are allowed."),g.length>0&&(R=[...R,...g],pe())};i&&t&&(i.addEventListener("change",l=>{h(l.target.files)}),t.addEventListener("dragover",l=>{l.preventDefault(),t.classList.add("bg-gray-700")}),t.addEventListener("dragleave",l=>{l.preventDefault(),t.classList.remove("bg-gray-700")}),t.addEventListener("drop",l=>{l.preventDefault(),t.classList.remove("bg-gray-700"),h(l.dataTransfer?.files??null)}),i.addEventListener("click",()=>{i.value=""})),e&&e.addEventListener("click",()=>{i?.click()}),n&&n.addEventListener("click",()=>{It()}),o&&o.addEventListener("click",Pn)});
